@using WebApp.Shared

@inherits LayoutComponentBase

<div class="alert @GetAlertClass()" role="alert">
    <i class="@GetIconClass()"></i> @Message
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" @onclick="CloseAlert">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

@code {
    [Parameter]
    public string Message { get; set; }

    [Parameter]
    public AlertType Type { get; set; } = AlertType.Info;

    private string GetAlertClass()
    {
        switch (Type)
        {
            case AlertType.Success:
                return "alert-success";
            case AlertType.Warning:
                return "alert-warning";
            case AlertType.Danger:
                return "alert-danger";
            default:
                return "alert-info";
        }
    }

    private string GetIconClass()
    {
        switch (Type)
        {
            case AlertType.Success:
                return "fas fa-check-circle mr-2";
            case AlertType.Warning:
                return "fas fa-exclamation-triangle mr-2";
            case AlertType.Danger:
                return "fas fa-times-circle mr-2";
            default:
                return "fas fa-info-circle mr-2";
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await Task.Delay(3000);
            CloseAlert();
        }
    }

    private void CloseAlert()
    {
        StateHasChanged();
    }

}